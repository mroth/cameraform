<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>CameraForm Test Page</title>
</head>
<body>

	<h1>CameraForm Test Page</h1>
	<h3>Demonstrates a dump implementation: capture, then return value for upload.</h3>
	
	<!-- First, include the JavaScript Library -->
	<script type="text/javascript" src="webcam.js"></script>
	
	<!-- Configure a few settings -->
	<script language="JavaScript">
		webcam.set_quality( 90 ); // JPEG quality (1 - 100)
		webcam.set_shutter_sound( true ); // play shutter click sound
	</script>

	<table><tr><td valign=top>
		
	<!-- Write the movie to the page at 320x240 -->
	<script language="JavaScript">
		document.write( webcam.get_html(320, 240) );
	</script>
	
	<!-- Some buttons for controlling things -->
	<br/><form>
		<input type=button value="Configure..." onClick="webcam.configure()">
		&nbsp;&nbsp;
		<input type=button value="Capture" onClick="webcam.freeze()">
		&nbsp;&nbsp;
		<input type=button value="Dump" onClick="do_upload()">
		&nbsp;&nbsp;
		<input type=button value="Reset" onClick="webcam.reset()">
	</form>
	
	<!-- Code to handle the server response (see test.php) -->
	<script language="JavaScript">
		webcam.set_hook( 'onComplete', 'my_completion_handler' );
		
		function do_upload() {
			// upload to server
			//document.getElementById('upload_results').innerHTML = '<h1>Uploading...</h1>';
			// webcam.upload();
			webcam.dump();
		}
		
		function my_completion_handler(base64) {
			var p = document.getElementById('preview');
			p.src = 'data:image/jpeg;base64,' + base64;
			document.getElementById('img_data').value = base64;
			webcam.reset();
		}
	</script>
	
	</td><td width=50>&nbsp;</td><td valign=top>
		<div id="upload_results" style="background-color:#eee;">
			preview image:<br/>
			<img id="preview" src="#"><br/>
			base64 encoded string:<br/>
			<textarea style="width:320px;" id='img_data' name='img_data'></textarea>
		</div>
	</td></tr></table>
</body>
</html>
